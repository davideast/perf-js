!function(e){"use strict";function t(e){return Object.freeze({name:e.name,event:e.event})}function n(e){return Object.keys(e).map(function(t){return e[t]})}function r(e,t){return e.filter(function(e){return t.indexOf(e)<0})}function o(e){return e instanceof PerformanceResourceTiming}function i(e){return e instanceof PerformanceTiming}function a(e){var t,n=0,r=e.performance,o=e.chrome;return o&&o.loadTimes?(n=1e3*o.loadTimes().firstPaintTime,t=n-1e3*o.loadTimes().startLoadTime):"number"==typeof r.timing.msFirstPaint&&(n=r.timing.msFirstPaint,t=n-r.timing.navigationStart),t}function c(t){if(!i(t))throw new Error("calcTimingMetrics(): arg bust be a PerformanceTiming object");return Object.freeze({loadTime:t.loadEventEnd-t.navigationStart,domReadyTime:t.domComplete-t.domInteractive,readyStart:t.fetchStart-t.navigationStart,redirectTime:t.redirectEnd-t.redirectStart,appcacheTime:t.domainLookupStart-t.fetchStart,unloadEventTime:t.unloadEventEnd-t.unloadEventStart,lookupDomainTime:t.domainLookupEnd-t.domainLookupStart,connectTime:t.connectEnd-t.connectStart,requestTime:t.responseEnd-t.requestStart,initDomTreeTime:t.domInteractive-t.responseEnd,loadEventTime:t.loadEventEnd-t.loadEventStart,latency:t.responseStart-t.connectStart,backend:t.responseEnd-t.navigationStart,frontend:t.loadEventStart-t.responseEnd,domContentLoaded:t.domContentLoadedEventStart-t.domInteractive,processDuration:t.loadEventStart-t.domLoading,firstPaintTime:a(e)})}function s(e){if(!o(e))throw new Error("calcResourceMetrics(): arg bust be a PerformanceResourceTiming object");return Object.freeze({dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,timeToFirstByte:e.responseStart-e.startTime,transfer:e.responseEnd-e.responseStart,total:e.responseEnd-e.startTime})}function u(e){if(!e.performance)throw new Error("perf: Your browser does not support the Navigation Timing API.");if(!e.performance.getEntries)throw new Error("perf: Your browser does not support the Resource Timing API.");var i=e.performance,a=e.userAgent,u=(e.pageUrl,{}),m={},d={},f=0,p=function(){var e=f+1;return e},E=function(e){var t=u[e.initiatorType],n=u.entry;t&&t.event(e),n&&n.event(e)},v=function(e){if(!o(e))throw new Error("perf.push(): arg bust be a PerformanceResourceTiming object");e.userAgent=a,e._metrics=s(e),E(e),m[p()]=e},g=function(e,n){u[e]=t({name:e,event:n}),Object.keys(m).forEach(function(e){var t=m[e];v(t)})},T=function(e){var t=n(m),o=r(e,t);o.forEach(function(e){v(e)})};!function(){var e=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){var t=this.onload;this.onload=function(){t&&t(),setTimeout(function(){T(i.getEntries())})},e.apply(this,arguments)}}();var l=function(){i.getEntries().forEach(v),d=i.timing,d._metrics=c(d)};return l(),Object.freeze({on:g,push:v,userAgent:a,timing:d})}e.Perf=u}(window);